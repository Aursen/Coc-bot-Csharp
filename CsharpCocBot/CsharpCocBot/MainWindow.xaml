<Window x:Class="CoC.Bot.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:CoC.Bot"
        xmlns:vm="clr-namespace:CoC.Bot.ViewModels"
        xmlns:b="clr-namespace:CoC.Bot.UI.Behaviours"
        xmlns:c="clr-namespace:CoC.Bot.UI.Converters"
        xmlns:ctrls="clr-namespace:CoC.Bot.UI.Controls"
        xmlns:d="clr-namespace:CoC.Bot.Data"
        xmlns:p="clr-namespace:CoC.Bot.Properties"
        Title="[TBC] Clash of Clans Bot" Icon="/Assets/Images/Icon.ico" Height="600" Width="500" ResizeMode="NoResize" WindowStyle="None" AllowsTransparency="True" Background="Transparent">

    <Window.DataContext>
        <vm:MainViewModel />
    </Window.DataContext>

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <c:EnumToBooleanConverter x:Key="EnumToBooleanConverter" />
        <c:InverseBooleanConverter x:Key="inverseBoolConverter" />
        <c:IntegerToStringConverter x:Key="IntegerToStringConverter" />
        <c:SelectedTreeViewItemConverter x:Key="SelectedTreeViewItemConverter" />
        <c:BooleanToStartStopStringConverter x:Key="BooleanToStartStopStringConverter" />
        <c:BooleanToStartStopImageSourceConverter x:Key="BooleanToStartStopImageSourceConverter" />
        <c:BooleanToOverlayConverter x:Key="BooleanToOverlayConverter" />
    </Window.Resources>

    <!-- Taskbar -->
    <Window.TaskbarItemInfo>
        <TaskbarItemInfo x:Name="taskbarItemInfo">
            <TaskbarItemInfo.Overlay>
                <DrawingImage>
                    <DrawingImage.Drawing >
                        <ImageDrawing Rect="0,0,16,16" ImageSource="{Binding Path=StartStopState, Converter={StaticResource BooleanToOverlayConverter}}" />
                    </DrawingImage.Drawing >
                </DrawingImage >
            </TaskbarItemInfo.Overlay>
            <TaskbarItemInfo.ThumbButtonInfos>
                <ThumbButtonInfoCollection>
                    <ThumbButtonInfo
                        DismissWhenClicked="False"
                        Command="{Binding AboutCommand}"
                        Description="{x:Static p:Resources.About}"
                        ImageSource="/Assets/Images/About.png"/>
                    <ThumbButtonInfo
                        DismissWhenClicked="False"
                        Description="{Binding Path=StartStopState, Converter={StaticResource BooleanToStartStopStringConverter}}"
                        Command="{Binding StartStopCommand}"
                        ImageSource="{Binding Path=StartStopState, Converter={StaticResource BooleanToStartStopImageSourceConverter}}"/>
                </ThumbButtonInfoCollection>
            </TaskbarItemInfo.ThumbButtonInfos>
        </TaskbarItemInfo>
    </Window.TaskbarItemInfo>

    <!-- Window -->
    <Border x:Name="Chrome" CornerRadius="0">
        <Grid>
            <Rectangle StrokeThickness="2">
                <Rectangle.Stroke>
                    <LinearGradientBrush>
                        <GradientStop Color="#FFFFFF" Offset="0"/>
                        <GradientStop Color="#000000" Offset="1"/>
                    </LinearGradientBrush>
                </Rectangle.Stroke>
            </Rectangle>
            <Grid x:Name="Root" Margin="2" Background="#A0333333">
                <Grid>
                    <Label Padding="0" HorizontalContentAlignment="Center">
                        <Grid>
                            <TextBlock Text="{Binding Title, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" IsHitTestVisible="False" Margin="10" FontSize="12"/>
                            <TextBlock Text="{Binding Title, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" IsHitTestVisible="False" Margin="10" FontSize="12">
                                <TextBlock.Effect>
                                    <BlurEffect Radius="5"/>
                                </TextBlock.Effect>
                            </TextBlock>
                        </Grid>
                    </Label>
                    <Label x:Name="Bar" Background="Transparent" MouseDown="Bar_MouseDown" />
                </Grid>
                <Button Command="{Binding ExitCommand}" VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,5,5,0" Width="20" Height="20" Focusable="False" Background="Transparent" BorderBrush="Transparent">
                    <Path Data="F1M608.038,178.012L595.565,165.539 576.036,185.068 556.509,165.54 544.038,178.012 563.565,197.539 544.038,217.066 556.512,229.538 576.038,210.012 595.565,229.539 608.036,217.068 588.509,197.54 608.038,178.012z" Stretch="Uniform" Fill="#BBFFFFFF" />
                </Button>
                <Grid Margin="5,30,5,5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="65" />
                        <RowDefinition Height="396*" />
                    </Grid.RowDefinitions>
                    <Grid Background="#808080" Margin="9,0,9,0" Grid.Row="0" >
                        <Image Source="/Assets/Images/Logo.png" Stretch="Uniform" Width="100" Height="50" Margin="25,5,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Grid.Row="0" />
                        <Label Content="{Binding AppTitle}" Height="32" HorizontalAlignment="Left" Margin="131,4,0,0" VerticalAlignment="Top" FontWeight="Normal" FontSize="16" FontFamily="Segoe UI Symbol" />
                        <Label Content="{x:Static p:Resources.AppDescription}" Height="28" HorizontalAlignment="Left" Margin="132,26,0,0" VerticalAlignment="Top" FontSize="10" FontFamily="Segoe UI Symbol" />
                    </Grid>
                    <TabControl Name="Tab" Margin="9,9,9,49" Grid.Row="1">
                        <TabControl.ItemContainerStyle>
                            <Style TargetType="{x:Type TabItem}" BasedOn="{StaticResource {x:Type TabItem}}">
                                <Setter Property="FontSize" Value="12"/>
                            </Style>
                        </TabControl.ItemContainerStyle>
                        <!-- General Tab -->
                        <TabItem Header="{x:Static p:Resources.General}">
                            <Grid Background="{DynamicResource BackgroundBrush}">
                                <TextBox Text="{Binding Output, UpdateSourceTrigger=PropertyChanged}" b:TextBoxBehaviour.AlwaysScrollToEnd="True" TextWrapping="Wrap" AcceptsReturn="True" Margin="16,16,18,100" IsReadOnly="True" VerticalScrollBarVisibility="Visible" />
                                <GroupBox Header="{x:Static p:Resources.Controls}" HorizontalAlignment="Left" Margin="16,0,0,18" VerticalAlignment="Bottom" Height="75" Width="210">
                                    <Grid>
                                        <Button Command="{Binding StartStopCommand}" Height="33" Width="75" HorizontalAlignment="Left" Margin="10,0,0,0">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Image Source="{Binding Path=StartStopState, Converter={StaticResource BooleanToStartStopImageSourceConverter}}" Width="16" Height="16" Margin="2" Grid.Column="0" />
                                                <StackPanel Grid.Column="1" Margin="2">
                                                    <TextBlock Text="{Binding Path=StartStopState, Converter={StaticResource BooleanToStartStopStringConverter}}" TextAlignment="Center" />
                                                </StackPanel>
                                            </Grid>
                                        </Button>
                                        <Button Command="{Binding HideCommand}" Height="33" Width="75" HorizontalAlignment="Right" Margin="0,0,10,0" Visibility="Visible">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Path Data="M31.687237,10.667C38.231297,14.096666 42.666001,19.463814 42.666001,19.463814 42.666001,19.463814 33.114207,31.052 21.333262,31.052 19.11721,31.052 16.981756,30.641903 14.974,29.97641L17.968835,26.516945C19.064911,26.760542 20.189886,26.903641 21.333262,26.903641 27.822621,26.903641 33.739193,22.471584 37.004723,19.463814 35.21846,17.82023 32.632517,15.76165 29.602583,14.222665 29.836977,14.907658 29.968575,15.631751 29.968575,16.382744 29.968575,20.541902 26.101458,23.913969 21.333262,23.913969 20.97387,23.913969 20.622277,23.889471 20.275885,23.851471L28.911198,13.874968z M21.333649,7.8749999C22.367567,7.8749999,23.375384,7.991208,24.369999,8.1538057L23.543387,9.1103305 23.544586,9.1103305 13.919428,20.229303C13.148615,19.102821 12.698008,17.790342 12.698008,16.382666 12.698008,15.627777 12.82831,14.901288 13.065114,14.213799 10.031464,15.749875 7.4478719,17.817741 5.6614729,19.463716 7.0313649,20.726396 8.8751452,22.238071 11.028781,23.570051L8.3228858,26.695002C3.2681233,23.407453 -2.3841858E-07,19.463716 0,19.463716 -2.3841858E-07,19.463716 9.5521562,7.8749999 21.333649,7.8749999z M34.252037,0L36.449997,1.9038253 6.0807195,36.990002 3.8829998,35.089188z" Stretch="Uniform" Fill="#BBFFFFFF" Width="15" Height="15" Margin="2" Grid.Column="0" RenderTransformOrigin="0.5,0.5" />
                                                <StackPanel Grid.Column="1" Margin="2">
                                                    <TextBlock Text="Hide" TextAlignment="Center" />
                                                </StackPanel>
                                            </Grid>
                                        </Button>
                                    </Grid>
                                </GroupBox>
                                <GroupBox Header="{x:Static p:Resources.TrophySettings}" HorizontalAlignment="Right" Margin="0,0,16,18" VerticalAlignment="Bottom" Height="75" Width="210">
                                    <Grid>
                                        <Label Content="{x:Static p:Resources.LabelMaxTrophies}" Height="26" HorizontalAlignment="Left" Margin="10,14,0,13" VerticalContentAlignment="Top" Width="83" Visibility="Visible" />
                                        <TextBox Text="{Binding MaxTrophies, UpdateSourceTrigger=PropertyChanged}" MaxLength="4" PreviewTextInput="NumberValidationTextBox" Height="23" Margin="0,0,20,0" TextAlignment="Right" Width="80" HorizontalAlignment="Right" />
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                        <!-- Search Settings Tab -->
                        <TabItem Header="{x:Static p:Resources.SearchSettings}">
                            <Grid Background="{DynamicResource BackgroundBrush}">
                                <GroupBox Header="{x:Static p:Resources.Conditions}" HorizontalAlignment="Left" Margin="16,16,0,0" VerticalAlignment="Top" Height="239" Width="210">
                                    <Grid>
                                        <CheckBox Content="{x:Static p:Resources.MeetGold}" IsChecked="{Binding MeetGold}" HorizontalAlignment="Left" Margin="30,10,0,0" VerticalAlignment="Top"/>
                                        <CheckBox Content="{x:Static p:Resources.MeetElixir}" IsChecked="{Binding MeetElixir}" HorizontalAlignment="Left" Margin="30,32,0,0" VerticalAlignment="Top"/>
                                        <CheckBox Content="{x:Static p:Resources.MeetDarkElixir}" IsChecked="{Binding MeetDarkElixir}" HorizontalAlignment="Left" Margin="30,54,0,0" VerticalAlignment="Top"/>
                                        <CheckBox Content="{x:Static p:Resources.MeetTrophyCount}" IsChecked="{Binding MeetTrophyCount}" HorizontalAlignment="Left" Margin="30,76,0,0" VerticalAlignment="Top"/>
                                        <CheckBox Content="{x:Static p:Resources.MeetTownhallLevel}" IsChecked="{Binding MeetTownhallLevel}" HorizontalAlignment="Left" Margin="30,98,0,0" VerticalAlignment="Top"/>
                                        <TextBlock Text="{x:Static p:Resources.ConditionsMessage}" Height="75" HorizontalAlignment="Left" Margin="10,0,0,10" VerticalAlignment="Bottom" Width="178" TextWrapping="Wrap" TextAlignment="Center" FontSize="11" />
                                    </Grid>
                                </GroupBox>
                                <GroupBox Header="{x:Static p:Resources.Factors}" HorizontalAlignment="Right" Margin="0,16,16,0" VerticalAlignment="Top" Height="239" Width="210">
                                    <Grid>
                                        <Label Content="{x:Static p:Resources.LabelMinimumGold}" Height="25" HorizontalAlignment="Left" Margin="10,12,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="113" />
                                        <Label Content="{x:Static p:Resources.LabelMinimumElixir}" Height="25" HorizontalAlignment="Left" Margin="10,40,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="113" />
                                        <Label Content="{x:Static p:Resources.LabelMinimumDarkElixir}" Height="25" HorizontalAlignment="Left" Margin="10,68,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="113" />
                                        <Label Content="{x:Static p:Resources.LabelMinimumTrophyCount}" Height="25" HorizontalAlignment="Left" Margin="10,96,0,0" VerticalAlignment="Top" VerticalContentAlignment="Top" Width="113" />
                                        <Label Content="{x:Static p:Resources.LabelMinimumTownhallLevel}" Height="25" HorizontalAlignment="Left" Margin="10,124,0,0" VerticalAlignment="Top" VerticalContentAlignment="Top" Width="113" />
                                        <TextBox Text="{Binding MinimumGold, UpdateSourceTrigger=PropertyChanged}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" MaxLength="6" PreviewTextInput="NumberValidationTextBox" TextAlignment="Right" HorizontalAlignment="Right" Height="23" Margin="0,12,10,0" VerticalAlignment="Top" Width="60" />
                                        <TextBox Text="{Binding MinimumElixir, UpdateSourceTrigger=PropertyChanged}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" MaxLength="6" PreviewTextInput="NumberValidationTextBox" TextAlignment="Right" HorizontalAlignment="Right" Height="23" Margin="0,40,10,0" VerticalAlignment="Top" Width="60" />
                                        <TextBox Text="{Binding MinimumDarkElixir, UpdateSourceTrigger=PropertyChanged}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" MaxLength="6" PreviewTextInput="NumberValidationTextBox" TextAlignment="Right" HorizontalAlignment="Right" Height="23" Margin="0,68,10,0" VerticalAlignment="Top" Width="60" />
                                        <TextBox Text="{Binding MinimumTrophyCount, UpdateSourceTrigger=PropertyChanged}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" MaxLength="2" PreviewTextInput="NumberValidationTextBox" TextAlignment="Right" HorizontalAlignment="Right" Height="23" Margin="0,96,10,0" VerticalAlignment="Top" Width="60" />
                                        <TextBox Text="{Binding MinimumTownhallLevel, UpdateSourceTrigger=PropertyChanged}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" MaxLength="2" PreviewTextInput="NumberValidationTextBox" TextAlignment="Right" HorizontalAlignment="Right" Height="23" Margin="0,124,10,0" VerticalAlignment="Top" Width="60" />
                                        <TextBlock Text="{x:Static p:Resources.ResourcesMessage}" Height="45" HorizontalAlignment="Left" Margin="10,0,0,10" VerticalAlignment="Bottom" Width="178" TextWrapping="Wrap" TextAlignment="Center" FontSize="11" />
                                    </Grid>
                                </GroupBox>
                                <GroupBox Header="{x:Static p:Resources.OtherSearchSettings}" Margin="16,260,16,0" VerticalAlignment="Top" Height="100">
                                    <CheckBox Content="{x:Static p:Resources.AlertWhenBaseFound}" IsChecked="{Binding IsAlertWhenBaseFound, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" Margin="30,10,0,0" VerticalAlignment="Top"/>
                                </GroupBox>
                                <Button Content="{x:Static p:Resources.SearchMode}" Command="{Binding SearchModeCommand}" Height="23" Margin="16,0,16,10" VerticalAlignment="Bottom" Visibility="Visible" />
                            </Grid>
                        </TabItem>
                        <!-- Attack Settings Tab -->
                        <TabItem Header="{x:Static p:Resources.AttackSettings}">
                            <Grid Background="{DynamicResource BackgroundBrush}">
                                <GroupBox Header="{x:Static p:Resources.WeakBaseSettings}" HorizontalAlignment="Left" Margin="16,16,0,0" VerticalAlignment="Top" Height="270" Width="131">
                                    <Grid>
                                        <Label Content="{x:Static p:Resources.MaxLevel}" Height="20" HorizontalAlignment="Left" Margin="63,-5,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="50" FontSize="9" HorizontalContentAlignment="Center" />
                                        <Label Content="{x:Static p:Resources.LabelMaxCannonLevel}" Height="25" HorizontalAlignment="Left" Margin="10,12,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="55" />
                                        <Label Content="{x:Static p:Resources.LabelMaxArcherTowerLevel}" Height="25" HorizontalAlignment="Left" Margin="10,40,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="55" />
                                        <Label Content="{x:Static p:Resources.LabelMaxMortarLevel}" Height="25" HorizontalAlignment="Left" Margin="10,68,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="55" />
                                        <Label Content="{x:Static p:Resources.LabelMaxWizardTowerLevel}" Height="25" HorizontalAlignment="Left" Margin="10,96,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="55" />
                                        <Label Content="{x:Static p:Resources.LabelMaxXbowLevel}" Height="25" HorizontalAlignment="Left" Margin="10,124,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="55" />
                                        <ComboBox ItemsSource="{Binding Path=CannonLevels, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedMaxCannonLevel}" Height="23" Width="40" VerticalAlignment="Top" Margin="0,12,10,0" HorizontalAlignment="Right" IsEnabled="False" />
                                        <ComboBox ItemsSource="{Binding Path=ArcherTowerLevels, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedMaxArcherTowerLevel}" Height="23" Width="40" VerticalAlignment="Top" Margin="0,40,10,0" HorizontalAlignment="Right" IsEnabled="False" />
                                        <ComboBox ItemsSource="{Binding Path=MortarLevels, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedMaxMortarLevel}" Height="23" Width="40" VerticalAlignment="Top" Margin="0,68,10,0" HorizontalAlignment="Right" IsEnabled="False" />
                                        <ComboBox ItemsSource="{Binding Path=WizardTowerLevels, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedMaxWizardTowerLevel}" Height="23" Width="40" VerticalAlignment="Top" Margin="0,96,10,0" HorizontalAlignment="Right" IsEnabled="False" />
                                        <ComboBox ItemsSource="{Binding Path=XbowLevels, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedMaxXbowLevel}" Height="23" Width="40" VerticalAlignment="Top" Margin="0,124,10,0" HorizontalAlignment="Right" IsEnabled="False" />
                                        <CheckBox Content="{x:Static p:Resources.AttackTheirKing}" IsChecked="{Binding IsAttackTheirKing, UpdateSourceTrigger=PropertyChanged}" FlowDirection="RightToLeft" HorizontalAlignment="Left" Margin="10,153,0,0" VerticalAlignment="Top" Width="99" IsEnabled="False" />
                                        <CheckBox Content="{x:Static p:Resources.AttackTheirQueen}" IsChecked="{Binding IsAttackTheirQueen, UpdateSourceTrigger=PropertyChanged}" FlowDirection="RightToLeft" HorizontalAlignment="Left" Margin="10,173,0,0" VerticalAlignment="Top" Width="99" IsEnabled="False" />
                                        <TextBlock Text="{x:Static p:Resources.WeakBaseSettingsMessage}" Height="45" HorizontalAlignment="Left" Margin="10,0,0,5" VerticalAlignment="Bottom" Width="99" TextWrapping="Wrap" TextAlignment="Center" FontSize="11" />
                                    </Grid>
                                </GroupBox>
                                <GroupBox Header="{x:Static p:Resources.AttackMode}" HorizontalAlignment="Right" Margin="0,16,16,0" VerticalAlignment="Top" Height="100" Width="290">
                                    <Grid>
                                        <RadioButton Content="{x:Static p:Resources.OptionDeadBases}" IsChecked="{Binding Path=SelectedAttackMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=DeadBases}" Margin="10,10,10,0" VerticalAlignment="Top" />
                                        <RadioButton Content="{x:Static p:Resources.OptionWeakBases}" IsChecked="{Binding Path=SelectedAttackMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=WeakBases}" Margin="10,30,10,0" VerticalAlignment="Top" IsEnabled="False" />
                                        <RadioButton Content="{x:Static p:Resources.OptionAllBases}" IsChecked="{Binding Path=SelectedAttackMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=AllBases}" Margin="10,50,10,0" VerticalAlignment="Top" />
                                    </Grid>
                                </GroupBox>
                                <GroupBox Header="{x:Static p:Resources.RoyalsAndClanCastleSettings}" HorizontalAlignment="Right" Margin="0,121,16,0" VerticalAlignment="Top" Height="165" Width="290">
                                    <Grid>
                                        <Label Content="{x:Static p:Resources.LabelKingSettings}" Height="25" HorizontalAlignment="Left" Margin="25,5,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="100" />
                                        <RadioButton Content="{x:Static p:Resources.AttackDeadBases}" IsChecked="{Binding Path=SelectedKingAttackMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=DeadBases}" Margin="10,31,0,0" VerticalAlignment="Top" HorizontalAlignment="Left" Width="125" />
                                        <RadioButton Content="{x:Static p:Resources.AttackWeakBases}" IsChecked="{Binding Path=SelectedKingAttackMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=WeakBases}" Margin="10,51,0,0" VerticalAlignment="Top" IsEnabled="False" Width="125" HorizontalAlignment="Left" />
                                        <RadioButton Content="{x:Static p:Resources.AttackAllBases}" IsChecked="{Binding Path=SelectedKingAttackMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=AllBases}" Margin="10,71,0,0" VerticalAlignment="Top" Width="125" HorizontalAlignment="Left" />
                                        <RadioButton Content="{x:Static p:Resources.None}" IsChecked="{Binding Path=SelectedKingAttackMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=None}" Margin="10,91,0,0" VerticalAlignment="Top" Width="125" HorizontalAlignment="Left" />
                                        <Label Content="{x:Static p:Resources.LabelQueenSettings}" Height="25" HorizontalAlignment="Right" Margin="0,5,20,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="100" />
                                        <RadioButton Content="{x:Static p:Resources.AttackDeadBases}" IsChecked="{Binding Path=SelectedQueenAttackMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=DeadBases}" Margin="0,31,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Width="125" />
                                        <RadioButton Content="{x:Static p:Resources.AttackWeakBases}" IsChecked="{Binding Path=SelectedQueenAttackMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=WeakBases}" Margin="0,51,10,0" VerticalAlignment="Top" IsEnabled="False" Width="125" HorizontalAlignment="Right" />
                                        <RadioButton Content="{x:Static p:Resources.AttackAllBases}" IsChecked="{Binding Path=SelectedQueenAttackMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=AllBases}" Margin="0,71,10,0" VerticalAlignment="Top" Width="125" HorizontalAlignment="Right" />
                                        <RadioButton Content="{x:Static p:Resources.None}" IsChecked="{Binding Path=SelectedQueenAttackMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=None}" Margin="0,91,10,0" VerticalAlignment="Top" Width="125" HorizontalAlignment="Right" />
                                        <CheckBox Content="{x:Static p:Resources.AttackUsingClanCastle}" IsChecked="{Binding IsAttackUsingClanCastle}" Margin="10,0,10,10" VerticalAlignment="Bottom" Width="258" />
                                    </Grid>
                                </GroupBox>
                                <GroupBox Header="{x:Static p:Resources.DeploySettings}" HorizontalAlignment="Left" Margin="16,0,0,16" VerticalAlignment="Bottom" Height="100" Width="432">
                                    <Grid>
                                        <ComboBox ItemsSource="{Binding Path=DeployStrategies, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedDeployStrategy}" DisplayMemberPath="Name" Height="23" Width="388" VerticalAlignment="Top" Margin="16,10,16,0" />
                                        <ComboBox ItemsSource="{Binding Path=DeployTroops, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedDeployTroop}" DisplayMemberPath="Name" Height="23" Width="210" VerticalAlignment="Bottom" Margin="16,0,164,10" HorizontalAlignment="Left" />
                                        <CheckBox Content="{x:Static p:Resources.AttackTownhall}" IsChecked="{Binding IsAttackTownhall}" HorizontalAlignment="Right" Margin="0,0,16,13" VerticalAlignment="Bottom" Width="155" IsEnabled="False" />
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                        <!-- Donate Settings Tab -->
                        <TabItem Header="{x:Static p:Resources.DonateSettings}">
                            <Grid Background="{DynamicResource BackgroundBrush}">
                                <GroupBox Header="{x:Static p:Resources.TroopRequest}" Margin="16,16,16,0" VerticalAlignment="Top" Height="62">
                                    <Grid>
                                        <CheckBox x:Name="chkRequestTroopsMsg" Content="{x:Static p:Resources.LabelRequestFor}" IsChecked="{Binding IsRequestTroops}" HorizontalAlignment="Left" Margin="16,10,0,0" VerticalAlignment="Top"/>
                                        <TextBox Text="{Binding RequestTroopsMessage}" IsEnabled="{Binding ElementName=chkRequestTroopsMsg, Path=IsChecked}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" Height="23" Margin="0,8,16,8" TextWrapping="Wrap" Width="290" HorizontalAlignment="Right"/>
                                    </Grid>
                                </GroupBox>
                                <GroupBox Header="{x:Static p:Resources.Troops}" Margin="16,83,16,0" VerticalAlignment="Top" Height="277">
                                    <Grid>
                                        <ctrls:TreeViewEx x:Name="donateTreeView" ItemsSource="{Binding TroopTiers}" SelectedItem="{Binding SelectedTroopForDonate, Mode=TwoWay}" HorizontalAlignment="Left" Margin="16,16,0,16" Width="155">
                                            <ctrls:TreeViewEx.Style>
                                                <Style TargetType="{x:Type TreeView}" BasedOn="{StaticResource {x:Type TreeView}}" />
                                            </ctrls:TreeViewEx.Style>
                                            <ctrls:TreeViewEx.ItemContainerStyle>
                                                <Style TargetType="{x:Type TreeViewItem}" BasedOn="{StaticResource {x:Type TreeViewItem}}">
                                                    <Setter Property="IsExpanded" Value="True" />
                                                    <!--<Setter Property="IsSelected" Value="{Binding IsSelectedInUI, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />-->
                                                    <!--<Style.Triggers>
                                                        <Trigger Property="IsSelected" Value="True">
                                                            <Setter Property="FontWeight" Value="Bold" />
                                                        </Trigger>
                                                    </Style.Triggers>-->
                                                </Style>
                                            </ctrls:TreeViewEx.ItemContainerStyle>
                                            <TreeView.Resources>
                                                <HierarchicalDataTemplate DataType="{x:Type d:TroopTierModel}" ItemsSource="{Binding Troops}">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="{Binding Name}" />
                                                        <TextBlock Text=" [" Foreground="{StaticResource DisabledForegroundBrush}" />
                                                        <TextBlock Text="{Binding Troops.Count}" Foreground="{StaticResource DisabledForegroundBrush}" />
                                                        <TextBlock Text="]" Foreground="{StaticResource DisabledForegroundBrush}" />
                                                    </StackPanel>
                                                </HierarchicalDataTemplate>
                                                <DataTemplate DataType="{x:Type d:TroopModel}">
                                                    <StackPanel Orientation="Horizontal">
                                                        <CheckBox IsChecked="{Binding IsSelectedForDonate}" />
                                                        <TextBlock Text="{Binding Name}" />
                                                    </StackPanel>
                                                </DataTemplate>
                                            </TreeView.Resources>
                                        </ctrls:TreeViewEx>
                                        <GroupBox Header="{Binding SelectedItem, ElementName=donateTreeView, Mode=OneWay, Converter={StaticResource SelectedTreeViewItemConverter}}" HorizontalAlignment="Right" Margin="0,8,16,16" Width="220">
                                            <Grid>
                                                <CheckBox x:Name="chkDonateToAll" Content="{x:Static p:Resources.DonateToAll}" IsChecked="{Binding IsCurrentDonateAll}" Visibility="{Binding ShouldHideDonateControls, Converter={StaticResource BooleanToVisibilityConverter}}" HorizontalAlignment="Left" Margin="16,10,0,0" VerticalAlignment="Top"/>
                                                <TextBox Text="{Binding CurrentDonateKeywords, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding ElementName=chkDonateToAll, Path=IsChecked, Converter={StaticResource inverseBoolConverter}}" Visibility="{Binding ShouldHideDonateControls, Converter={StaticResource BooleanToVisibilityConverter}}" Margin="16,32,16,0" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Visible" VerticalAlignment="Top" Height="100" />
                                                <Label Content="{x:Static p:Resources.LabelMaxDonationsPerRequest}" Visibility="{Binding ShouldHideDonateControls, Converter={StaticResource BooleanToVisibilityConverter}}" Height="25" HorizontalAlignment="Right" Margin="0,137,59,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="138" />
                                                <TextBox Text="{Binding CurrentMaxDonationsPerRequest, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource IntegerToStringConverter}}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" Visibility="{Binding ShouldHideDonateControls, Converter={StaticResource BooleanToVisibilityConverter}}" PreviewTextInput="NumberValidationTextBox" MaxLength="1" TextAlignment="Right" HorizontalAlignment="Right" Height="23" Margin="0,139,16,0" VerticalAlignment="Top" Width="40" />
                                                <TextBlock Text="{Binding TroopTierSelectedInfoMessage}" Visibility="{Binding ShouldHideTierInfoMessage, Converter={StaticResource BooleanToVisibilityConverter}}" Height="90" HorizontalAlignment="Right" Margin="0,44,13,75" VerticalAlignment="Center" Width="182" TextWrapping="Wrap" TextAlignment="Center" FontSize="24" />
                                                <TextBlock Text="{x:Static p:Resources.DonateMessage}" Height="29" HorizontalAlignment="Right" Margin="0,0,13,10" VerticalAlignment="Bottom" Width="182" TextWrapping="Wrap" TextAlignment="Center" FontSize="11" />
                                            </Grid>
                                        </GroupBox>
                                    </Grid>
                                </GroupBox>
                                <Button Content="{x:Static p:Resources.LocateClanCastleManually}" Command="{Binding LocateClanCastleCommand}" Height="23" Margin="16,0,16,10" VerticalAlignment="Bottom" Visibility="Visible" />
                            </Grid>
                        </TabItem>
                        <!-- Troop Settings Tab -->
                        <TabItem Header="{x:Static p:Resources.TroopSettings}">
                            <Grid Background="{DynamicResource BackgroundBrush}">
                                <GroupBox Header="{x:Static p:Resources.Troops}" HorizontalAlignment="Left" Margin="16,16,0,0" VerticalAlignment="Top" Height="270" Width="210">
                                    <Grid>
                                        <Label Content="{x:Static p:Resources.LabelBarbarians}" Height="25" HorizontalAlignment="Left" Margin="10,12,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="113" />
                                        <Label Content="{x:Static p:Resources.LabelArchers}" Height="25" HorizontalAlignment="Left" Margin="10,40,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="130" />
                                        <Label Content="{x:Static p:Resources.LabelGoblins}" Height="25" HorizontalAlignment="Left" Margin="10,68,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="113" />
                                        <Label Content="{Binding TotalPercent}" Height="25" HorizontalAlignment="Left" Margin="98,96,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="60" HorizontalContentAlignment="Center" />
                                        <TextBox Text="{Binding BarbariansPercent, UpdateSourceTrigger=PropertyChanged}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" MaxLength="2" PreviewTextInput="NumberValidationTextBox" TextAlignment="Center" HorizontalAlignment="Right" Height="23" Margin="0,12,40,0" VerticalAlignment="Top" Width="60" IsEnabled="{Binding IsCustomTroopsEnabled}" />
                                        <TextBox Text="{Binding ArchersPercent, UpdateSourceTrigger=PropertyChanged}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" MaxLength="2" PreviewTextInput="NumberValidationTextBox" TextAlignment="Center" HorizontalAlignment="Right" Height="23" Margin="0,40,40,0" VerticalAlignment="Top" Width="60" IsEnabled="{Binding IsCustomTroopsEnabled}" />
                                        <TextBox Text="{Binding GoblinsPercent, UpdateSourceTrigger=PropertyChanged}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" MaxLength="2" PreviewTextInput="NumberValidationTextBox" TextAlignment="Center" HorizontalAlignment="Right" Height="23" Margin="0,68,40,0" VerticalAlignment="Top" Width="60" IsEnabled="{Binding IsCustomTroopsEnabled}" />
                                        <Label Content="{x:Static p:Resources.Percent}" Height="25" HorizontalAlignment="Right" Margin="0,12,10,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="20" />
                                        <Label Content="{x:Static p:Resources.Percent}" Height="25" HorizontalAlignment="Right" Margin="0,40,10,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="20" />
                                        <Label Content="{x:Static p:Resources.Percent}" Height="25" HorizontalAlignment="Right" Margin="0,68,10,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="20" />
                                        <Label Content="{x:Static p:Resources.Percent}" Height="25" HorizontalAlignment="Right" Margin="0,96,10,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="20" />
                                        <ComboBox ItemsSource="{Binding Path=TroopCompositions, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedTroopComposition}" DisplayMemberPath="Name" Height="23" VerticalAlignment="Top" Margin="10,145,10,0" />
                                        <TextBlock Text="{x:Static p:Resources.TroopsMessage}" Height="60" HorizontalAlignment="Left" Margin="10,0,0,10" VerticalAlignment="Bottom" Width="178" TextWrapping="Wrap" TextAlignment="Center" FontSize="11" />
                                    </Grid>
                                </GroupBox>
                                <GroupBox Header="{x:Static p:Resources.OtherTroops}" HorizontalAlignment="Right" Margin="0,16,16,0" VerticalAlignment="Top" Height="100" Width="210">
                                    <Grid>
                                        <Label Content="{x:Static p:Resources.LabelNumberOfGiants}" Height="25" HorizontalAlignment="Left" Margin="10,12,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="113" />
                                        <Label Content="{x:Static p:Resources.LabelNumberOfWallBreakers}" Height="25" HorizontalAlignment="Left" Margin="10,40,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="130" />
                                        <TextBox Text="{Binding NumberOfGiants, UpdateSourceTrigger=PropertyChanged}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" MaxLength="2" PreviewTextInput="NumberValidationTextBox" TextAlignment="Center" HorizontalAlignment="Right" Height="23" Margin="0,12,10,0" VerticalAlignment="Top" Width="40" IsEnabled="{Binding IsCustomTroopsEnabled}" />
                                        <TextBox Text="{Binding NumberOfWallBreakers, UpdateSourceTrigger=PropertyChanged}" b:TextBoxBehaviour.SelectAllTextOnFocus="True" MaxLength="2" PreviewTextInput="NumberValidationTextBox" TextAlignment="Center" HorizontalAlignment="Right" Height="23" Margin="0,40,10,0" VerticalAlignment="Top" Width="40" IsEnabled="{Binding IsCustomTroopsEnabled}" />
                                    </Grid>
                                </GroupBox>
                                <GroupBox Header="{x:Static p:Resources.Barracks}" HorizontalAlignment="Right" Margin="0,121,16,0" VerticalAlignment="Top" Height="165" Width="210">
                                    <Grid>
                                        <Label Content="{x:Static p:Resources.LabelBarrack1}" Height="25" HorizontalAlignment="Left" Margin="10,12,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="61" />
                                        <Label Content="{x:Static p:Resources.LabelBarrack2}" Height="25" HorizontalAlignment="Left" Margin="10,40,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="61" />
                                        <Label Content="{x:Static p:Resources.LabelBarrack3}" Height="25" HorizontalAlignment="Left" Margin="10,68,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="61" />
                                        <Label Content="{x:Static p:Resources.LabelBarrack4}" Height="25" HorizontalAlignment="Left" Margin="10,96,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="61" />
                                        <ComboBox ItemsSource="{Binding Path=Troops, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedBarrack1}" DisplayMemberPath="Name" Height="23" VerticalAlignment="Top" Margin="76,14,10,0" IsEnabled="{Binding IsUseBarracksEnabled}" />
                                        <ComboBox ItemsSource="{Binding Path=Troops, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedBarrack2}" DisplayMemberPath="Name" Height="23" VerticalAlignment="Top" Margin="76,42,10,0" IsEnabled="{Binding IsUseBarracksEnabled}" />
                                        <ComboBox ItemsSource="{Binding Path=Troops, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedBarrack3}" DisplayMemberPath="Name" Height="23" VerticalAlignment="Top" Margin="76,70,10,0" IsEnabled="{Binding IsUseBarracksEnabled}" />
                                        <ComboBox ItemsSource="{Binding Path=Troops, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding Path=SelectedBarrack4}" DisplayMemberPath="Name" Height="23" VerticalAlignment="Top" Margin="76,98,10,0" IsEnabled="{Binding IsUseBarracksEnabled}" />
                                    </Grid>
                                </GroupBox>
                                <GroupBox Header="{x:Static p:Resources.OtherTroopsSettings}" HorizontalAlignment="Left" Margin="16,0,0,16" VerticalAlignment="Bottom" Height="100" Width="432">
                                    <Grid>
                                        <Button Content="{x:Static p:Resources.LocateCollectorsManually}" Command="{Binding LocateCollectorsCommand}" Height="23" Margin="16,10" VerticalAlignment="Top" Visibility="Visible" />
                                        <Button Content="{x:Static p:Resources.LocateBarracksManually}" Command="{Binding LocateBarracksCommand}" Height="23" Margin="16,0,16,10" VerticalAlignment="Bottom" Visibility="Visible" />
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </TabItem>
                        <TabItem Header="{x:Static p:Resources.Help}">
                            <Grid Background="{DynamicResource BackgroundBrush}">

                            </Grid>
                        </TabItem>
                    </TabControl>
                    <Label x:Name="lblMessage" Content="{Binding Message}" Height="26" HorizontalAlignment="Left" Margin="9,0,0,15" VerticalAlignment="Bottom" VerticalContentAlignment="Top" Width="381" Grid.Row="1" />
                    <Button Name="btnExit" Command="{Binding ExitCommand}" Height="23" HorizontalAlignment="Right" Margin="0,0,9,15" VerticalAlignment="Bottom" Width="75" Grid.Row="1" Visibility="Visible">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Path Data="M46.76351,9.7099124L62.668314,20.44793 46.76351,31.195712 46.76351,25.607022 34.769915,25.607022 34.769915,15.29909 46.76351,15.29909z M2.3100052,0L36.820089,0C38.100092,0,39.130095,1.030097,39.130095,2.3002157L39.130095,10.961028 36.820089,10.961028 36.820089,2.3002157 6.1000137,2.3002157 25.360062,13.981312C26.410064,14.591369,27.140066,15.121418,27.660068,16.291528L27.660068,35.733352 36.820089,35.733352 36.820089,29.952809 39.130095,29.952809 39.130095,35.733352C39.130095,37.013473,38.100092,38.043569,36.820089,38.043569L27.660068,38.043569 27.660068,49.724664C27.660067,50.994782,26.630064,52.02488,25.360062,52.02488L2.3100052,38.043569C1.0300026,38.043569,0,37.013473,0,35.733352L0,2.3002157C0,1.030097,1.0300026,0,2.3100052,0z" Stretch="Uniform" Fill="#BBFFFFFF" Margin="2" Grid.Column="0" />
                            <StackPanel Grid.Column="1" Margin="2">
                                <TextBlock Text="Exit" />
                            </StackPanel>
                        </Grid>
                    </Button>
                </Grid>
            </Grid>
        </Grid>
    </Border>
</Window>
